<html>
<head>
	<title>MarcoPolo Hacking Guide</title>
</head>
<body>
<h1>MarcoPolo Hacking Guide</h1>
<h2>5 August 2007</h2>

<h3>Adding a new Evidence Source</h3>
<ol>
<li>Pick a <em>short name</em> for the rule; no spaces, starting with a letter (e.g. <tt>Foo</tt>)</li>
<li>Create an Objective-C class called <tt>FooEvidenceSource</tt> in the same style as the other sources. It should inherit from one of these:
	<ul>
	<li>EvidenceSource
		<ul>
		<li>You provide your own nib (call it "FooRule.nib")</li>
		<li>Call [super initWithNibNamed:@"FooRule"] in your -init</li>
		<li>Extend readFromPanel, writeToPanel</li>
		<li>Implement your own start/stop code</li>
		</ul>
	</li>
	<li>GenericEvidenceSource
		<ul>
		<li>Implement your own start/stop code</li>
		<li>Implement getSuggestions, getSuggestionLeadText</li>
		</ul>
	</li>
	<li>LoopingEvidenceSource
		<ul>
		<li>You provide your own nib (call it "FooRule.nib")</li>
		<li>Call [super initWithNibNamed:@"FooRule"] in your -init</li>
		<li>Implement doUpdate, clearCollectedData</li>
		<li>Extend readFromPanel, writeToPanel</li>
		</ul>
	</li>
	<li>GenericLoopingEvidenceSource
		<ul>
		<li>Implement doUpdate, clearCollectedData</li>
		<li>Implement getSuggestions, getSuggestionLeadText</li>
		</ul>
	</li>
	</ul>
</li>
<li>Add mention of it in MPController.m, around line 59:
<pre>
	[appDefaults setValue:@"YES" forKey:@"EnableFooEvidenceSource"];
</pre>
</li>
<li>Add mention of it in the three places in EvidenceSource.m, from ~ line 268:
<pre>
	#import "FooEvidenceSource.h"
	...
	[FooEvidenceSource class],
	...
	NSLocalizedString(@"Foo", @"Evidence source");
</pre>
</li>
</ol>

<h3>Adding a new Action</h3>
<ol>
<li>Pick a <em>short name</em> for the action; no spaces, starting with a letter (e.g. <tt>Foo</tt>)</li>
<li>Create an Objective-C class called <tt>FooAction</tt> in the same style as the other actions</li>
<li>Add mention of it in the three places in Action.m (from around line 146):
<pre>
	#import "FooAction.h"
	...
	[FooAction class],
	...
	NSLocalizedString(@"Foo", @"Action type")
</pre>
</li>
</ol>

</body>
</html>
