<html>
<head>
	<title>MarcoPolo Hacking Guide</title>
</head>
<body>
<h1>MarcoPolo Hacking Guide</h1>
<h2>5 August 2007</h2>

<h3>Adding a new Evidence Source</h3>
(1) Pick a "short name" for the rule; no spaces, starting with a letter (e.g. "Foo")
(2) Create an Objective-C class called "FooEvidenceSource" in the same style as the other sources. It should inherit from one of these:
	- EvidenceSource (you provide your own nib, and start/stop code)
		* You provide your own nib (call it "FooRule.nib")
		* Call [super initWithNibNamed:@"FooRule"] in your -init
		* Extend readFromPanel, writeToPanel
		* Implement your own start/stop code
	- GenericEvidenceSource
		* Implement your own start/stop code
		* Implement getSuggestions, getSuggestionLeadText
	- LoopingEvidenceSource
		* You provide your own nib (call it "FooRule.nib")
		* Call [super initWithNibNamed:@"FooRule"] in your -init
		* Implement doUpdate, clearCollectedData
		* Extend readFromPanel, writeToPanel
	- GenericLoopingEvidenceSource
		* Implement doUpdate, clearCollectedData
		* Implement getSuggestions, getSuggestionLeadText

(3) Add mention of it in MPController.m, around line 59:
	- [appDefaults setValue:@"YES" forKey:@"EnableFooEvidenceSource"];
(4) Add mention of it in the three places in EvidenceSource.m, from ~ line 268:
	- #import "FooEvidenceSource.h"
	- [FooEvidenceSource class],
	- NSLocalizedString(@"Foo", @"Evidence source");

<h3>Adding a new Action</h3>
(1) Pick a "short name" for the action; no spaces, starting with a letter (e.g. "Foo")
(2) Create an Objective-C class called "FooAction" in the same style as the other actions
(3) Add mention of it in the three places in Action.m (from around line 130):
	- #import "FooAction.h"
	- [FooAction class]	(in the classes array construction)
	- NSLocalizedString(@"Foo", @"Action type")

</body>
</html>
